@page "/experimental"
@using MegaSchool1.Components
@inject IJSRuntime JS

<MudStack Spacing="6">
    <Centered><MudIcon Icon="@Icons.Material.Filled.School" /><MudLink Href="/wealthmap">Mega GED</MudLink></Centered>
    <Centered><MudIcon Icon="@Icons.Material.Filled.DirectionsCar" /><MudLink Href="/carpurchase">Teen Car Purchase</MudLink></Centered>
    <Centered><MudIcon Icon="@Icons.Material.Filled.Security" /><MudLink Href="/trustfundmybaby">Trust Fund My Baby</MudLink></Centered>
    <Centered><MudIcon Icon="@Icons.Material.Filled.Handshake" /><MudLink Href="/givbuxfundraiserprojections">GivBux Fundraiser Projections</MudLink></Centered>
    <Centered><MudIcon Icon="@Icons.Material.Filled.Gamepad" /><MudLink Href="/game">Game</MudLink></Centered>
    <Centered><MudIcon Icon="@Icons.Material.Filled.Money" /><MudLink OnClick="OnRunProtocol">USA</MudLink></Centered>
    <MudDivider />
    <Collapsable Title="Tests">
        <MudStack Spacing="3">
            <MudCard Outlined="true">
                <MudCardHeader>
                    <MudText Typo="Typo.h6">Capture Pages</MudText>
                </MudCardHeader>
                <MudCardContent>
                    <MudStack Spacing="3">
                        <ExternalLink Href="/en/thankyou/MS1/megaschool">Thank You (english)</ExternalLink>
                        <ExternalLink Href="/es/thankyou/MS1/megaschool">Thank You (spanish)</ExternalLink>
                        <ExternalLink Href="/en/MegaSchoolAppInstall/MS1/megaschool">App Install Shareable - YouTube</ExternalLink>
                        <ExternalLink Href="/72/MS1/megaschool">72-Hour Money Challenge (legacy)</ExternalLink>
                    </MudStack>
                </MudCardContent>
            </MudCard>
            <Centered><MudLink Href="/this-page-does-not-exist">Non-existent Page</MudLink></Centered>
        </MudStack>
    </Collapsable>
</MudStack>

<MudDialog @bind-Visible="_messageDialog.Show" Options="@(new DialogOptions() { NoHeader = true })">
    <DialogContent>
        <MudText>@_messageDialog.Message</MudText>
    </DialogContent>
</MudDialog>

@code{
    private (bool Show, string Message) _messageDialog;
  
    private async Task OnRunProtocol()
    {
        _messageDialog = (true, "Starting Protocol...");

        await USA.Model.Protocol.RunAsync();

        _messageDialog = (true, "Protocol complete!");
    }
}