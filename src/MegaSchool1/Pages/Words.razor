@page "/words"
@using MegaSchool1.Components
@using MegaSchool1.Dialog
@using MegaSchool1.Model
@using MegaSchool1.Model.Repository
@using MegaSchool1.Repository.Model
@inherits Components.ComponentBase
@inject IDialogService Dialog
@inject UISettings UI
@inject Constants Constants

<MudText Typo="Typo.h3" GutterBottom="true" Align="Align.Center">How to Share</MudText>
<br/>
<br/>
<StrategyChooser @ref="@_strategyChooser" Strategies="@StrategyChooser.AllStrategies">
    <MudTabPanel Text="Mega School" Tag="@Strategy.MegaSchool">
        <MudStack Spacing="3">
                <Collapsable Title="Listen & Ask" ExpandPrompt="Show me how!">
                    <br />
                    <Centered><MudButton OnClick="@(() => _showListenAndAsk = true)" Color="Color.Primary" Variant="Variant.Filled">Watch How To</MudButton></Centered>
                </Collapsable>
                <Collapsable Title="Share" ExpandPrompt="Show me how!">
                    <BinaryChoice Description="I'm Sharing" FirstChoiceLabel="In Person" SecondChoiceLabel="On the Phone">
                        <FirstChoiceContent>
                            <MudStack>
                                <MudStack Row="true">
                                    <MudText>#1 </MudText>
                                    <MudText>"Do you have a couple minutes?"</MudText>
                                </MudStack>
                                <MudStack Row="true">
                                    <MudText>#2: </MudText>
                                    <MudButton OnClick="@(() => _show72HourMoneyChallengeVideo = true)" Color="Color.Primary" Size="Size.Small" Variant="Variant.Filled">Show 72-Hour Money Challenge Video</MudButton>
                                </MudStack>
                                <MudStack Row="true">
                                    <MudText>#3: </MudText>
                                    <MudStack Row="true">
                                        <MudText>(Optional) </MudText>
                                        <MudButton OnClick="@(() => _showFaqVideo = true)" Color="Color.Primary" Size="Size.Small" Variant="Variant.Filled">Show FAQ Video</MudButton>
                                    </MudStack>
                                </MudStack>
                                <MudStack Row="true">
                                    <MudText>#4:</MudText>
                                    <MudText>"So, are you ready to take the challenge?"</MudText>
                                </MudStack>
                                <MudText Align="Align.Center">@Constants.PointingDownEmoji</MudText>
                                <BinaryChoice Description="Prospect Response" FirstChoiceLabel="@("\"Yes\"")" SecondChoiceLabel="@("\"I have a question\"")">
                                    <FirstChoiceContent>
                                        <MudText Align="Align.Center">"Great, here's how you take the challenge!"<br />@Constants.PointingDownEmoji</MudText>
                                        <MudStack Row="true">
                                            <MudText>#1: </MudText>
                                            <MudButton OnClick="@(() => _signUpDialog = (true, (string memberId) => Constants.JoinMakeWealthReal(memberId, Language.English) + Constants.GetBusinessEnrollmentPromo(memberId)))" Color="Color.Primary" Size="Size.Small" Variant="Variant.Filled">Share Membership Sign-up Link</MudButton>
                                        </MudStack>
                                        <MudStack Row="true">
                                            <MudText>#2: </MudText>
                                            <MudText>Confirm membership sign up via email confirmation to YOU</MudText>
                                        </MudStack>
                                    </FirstChoiceContent>
                                    <SecondChoiceContent>
                                        <MudStack Row="true">
                                            <MudText>#1: </MudText>
                                            <MudText Align="Align.Center"> Go to the "Connect" section below <br /> @(Constants.PointingDownEmoji)</MudText>
                                        </MudStack>
                                    </SecondChoiceContent>
                                </BinaryChoice>
                            </MudStack>
                        </FirstChoiceContent>
                        <SecondChoiceContent>
                            <MudStack>
                                <MudStack Row="true">
                                    <MudText>#1: </MudText>
                                    <MudText>"Let me show you this 2min video, it explains it perfectly.</MudText>
                                </MudStack>
                                <MudStack Row="true">
                                    <MudText>#2: </MudText>
                                    <MudButton OnClick="@(() => _show72HourMoneyChallengeShareable = true)" Color="Color.Primary" Size="Size.Small" Variant="Variant.Filled">Share Video</MudButton>
                                </MudStack>
                                <MudStack Row="true">
                                    <MudText>#3: </MudText>
                                    <MudText>"Did you watch the video?"</MudText>
                                </MudStack>
                                <MudStack Row="true">
                                    <MudText>#4: </MudText>
                                    <MudText>"So are you ready to take the challenge?"</MudText>
                                </MudStack>
                                <MudText Align="Align.Center">@Constants.PointingDownEmoji</MudText>
                                <BinaryChoice Description="Prospect Response" FirstChoiceLabel="@("\"Yes\"")" SecondChoiceLabel="@("\"I have a question\"")">
                                    <FirstChoiceContent>
                                        <MudText Align="Align.Center">"Great, here's how you take the challenge!"<br />@Constants.PointingDownEmoji</MudText>
                                        <MudStack Row="true">
                                            <MudText>#1: </MudText>
                                            <MudButton OnClick="@(() => _signUpDialog = (true, (string memberId) => Constants.JoinMakeWealthReal(memberId, Language.English) + Constants.GetBusinessEnrollmentPromo(memberId)))" Color="Color.Primary" Size="Size.Small" Variant="Variant.Filled">Share Membership Sign-up Link</MudButton>
                                        </MudStack>
                                        <MudStack Row="true">
                                            <MudText>#2: </MudText>
                                            <MudText>Confirm membership sign up via email confirmation to YOU</MudText>
                                        </MudStack>
                                    </FirstChoiceContent>
                                    <SecondChoiceContent>
                                        <MudStack Row="true">
                                            <MudText>#1: </MudText>
                                            <MudText Align="Align.Center"> Go to the "Connect" section below <br /> @(Constants.PointingDownEmoji)</MudText>
                                        </MudStack>
                                    </SecondChoiceContent>
                                </BinaryChoice>
                            </MudStack>
                        </SecondChoiceContent>
                    </BinaryChoice>
                </Collapsable>
                <Collapsable Title="Connect" ExpandPrompt="Show me how!">
                    <MudStack>
                        <MudStack Row="true">
                            <MudText>#1: </MudText>
                            <MudText>"Great question! I just know it works for me, but let me connect you with [MY SPONSOR], he/she is the "Michael Jordan"/"Oprah Winfrey" of the program. He/She knows 100% of the information. I'll set up a warm introduction, I promise.'"</MudText>
                        </MudStack>
                        <MudStack Row="true">
                            <MudText>#2: </MudText>
                            <MudText>Start a 3-way text thread with you, your prospect, and your upline</MudText>
                        </MudStack>
                    </MudStack>
                </Collapsable>
            </MudStack>
        </MudTabPanel>
    <MudTabPanel Text="Corporate" Tag="@Strategy.Corporate">
        <Collapsable Title="Ask" ExpandPrompt="Show me how!">
            <MudText Align="Align.Center">Tap Image to Download</MudText>
            <DownloadableImage Alt="72-Hour Money Challenge | Share" ImageUri="images/words/72hour-share.jpeg" />
            <DownloadableImage Alt="72-Hour Money Challenge | Response" ImageUri="images/words/72hour-response.jpeg" />
            <DownloadableImage Alt="72-Hour Money Challenge | Success Story" ImageUri="images/words/72hour-success-story.jpeg" />
        </Collapsable>
        <br />
        <br />
        <Collapsable Title="Share" ExpandPrompt="Show me how!">
            <BinaryChoice Description="I'm Sharing" FirstChoiceLabel="In Person" SecondChoiceLabel="On the Phone">
                <FirstChoiceContent>
                    <MudStack>
                        <MudStack Row="true">
                            <MudText>#1: </MudText>
                            <MudText>"Do you have 5 minutes?"</MudText>
                        </MudStack>
                        <MudStack Row="true">
                            <MudText>#2: </MudText>
                            <MudButton OnClick="@(() => _show1On1Presentation = true)" Color="Color.Primary" Size="Size.Small" Variant="Variant.Filled">Show 1-on-1 Presentation</MudButton>
                        </MudStack>
                        <MudStack Row="true">
                            <MudText>#3: </MudText>
                            <MudText>"So, do you want some of the money, or all of the money?"</MudText>
                        </MudStack>
                        <BinaryChoice Description="Prospect Response" FirstChoiceLabel="@("\"Yes\"")" SecondChoiceLabel="@("\"I have a question\"")">
                            <FirstChoiceContent>
                                <MudText Align="Align.Center">"Great, here's how you take the challenge!"<br />@Constants.PointingDownEmoji</MudText>
                                <MudStack Row="true">
                                    <MudSpacer />
                                    <MudButton OnClick="@(() => _signUpDialog = (true, (string memberId) => Constants.JoinMakeWealthReal(memberId, Language.English) + Constants.GetBusinessEnrollmentPromo(memberId)))" Color="Color.Primary" Size="Size.Small" Variant="Variant.Filled">Share Membership Sign-up Link</MudButton>
                                    <MudSpacer />
                                </MudStack>
                            </FirstChoiceContent>
                            <SecondChoiceContent>
                                <MudText Align="Align.Center"> Go to the "Connect" section below <br /> @(Constants.PointingDownEmoji)</MudText>
                            </SecondChoiceContent>
                        </BinaryChoice>
                    </MudStack>
                </FirstChoiceContent>
                <SecondChoiceContent>
                    <MudStack>
                        <MudStack Row="true">
                            <MudText>#1: </MudText>
                            <MudText>"Let me show you this 2min video, it explains it perfectly, lol. <br /><br /> If you have any questions, I'm going to connect you with someone FAR more qualified than me for answers."</MudText>
                        </MudStack>
                        <MudStack Row="true">
                            <MudText>#2: </MudText>
                            <MudButton OnClick="@(() => _show72HourMoneyChallengeShareable = true)" Color="Color.Primary" Size="Size.Small" Variant="Variant.Filled">Share Video</MudButton>
                        </MudStack>
                        <MudStack Row="true">
                            <MudText>#3: </MudText>
                            <MudText>"Did you watch the video?"</MudText>
                        </MudStack>
                        <MudStack Row="true">
                            <MudText>#4: </MudText>
                            <MudText>"So are you ready to take the challenge?"</MudText>
                        </MudStack>
                        <BinaryChoice Description="Prospect Response" FirstChoiceLabel="@("\"Yes\"")" SecondChoiceLabel="@("\"I have a question\"")">
                            <FirstChoiceContent>
                                <MudText Align="Align.Center">"Great, here's how you take the challenge!"<br />@Constants.PointingDownEmoji</MudText>
                                <MudStack Row="true">
                                    <MudSpacer />
                                    <MudButton OnClick="@(() => _signUpDialog = (true, (string memberId) => Constants.JoinMakeWealthReal(memberId, Language.English) + Constants.GetBusinessEnrollmentPromo(memberId)))" Color="Color.Primary" Size="Size.Small" Variant="Variant.Filled">Share Membership Sign-up Link</MudButton>
                                    <MudSpacer />
                                </MudStack>
                            </FirstChoiceContent>
                            <SecondChoiceContent>
                                <MudText Align="Align.Center"> Go to the "Connect" section below <br /> @(Constants.PointingDownEmoji)</MudText>
                            </SecondChoiceContent>
                        </BinaryChoice>
                    </MudStack>
                </SecondChoiceContent>
            </BinaryChoice>
        </Collapsable>
        <br />
        <br />
        <Collapsable Title="Connect" ExpandPrompt="Show me how!">
            <MudStack>
                <MudStack Row="true">
                    <MudText>#1: </MudText>
                    <MudText>"Great question!  I just know it works for me, but let me connect you with [MY SPONSOR], he/she is the "Michael Jordan"/"Oprah Winfrey" of the program.  He/She knows 100% of the information.  I'll set up a warm introduction, I promise.'"</MudText>
                </MudStack>
                <MudStack Row="true">
                    <MudText>#2: </MudText>
                    <MudText>Start a 3-way text thread with you, your prospect, and your upline</MudText>
                </MudStack>
            </MudStack>
        </Collapsable>
    </MudTabPanel>
    <MudTabPanel Tag="@Strategy.ExtraDigitMovement">
        <MudText Align="Align.Center">Coming Soon!</MudText>
    </MudTabPanel>
    <MudTabPanel Tag="@Strategy.FaithAndFinance">
        <MudText Align="Align.Center">Coming Soon!</MudText>
    </MudTabPanel>
    <MudTabPanel Tag="@Strategy.RealEstate">
        <MudText Align="Align.Center">Coming Soon!</MudText>
    </MudTabPanel>
    <MudTabPanel Tag="@Strategy.Latino">
        <MudText Align="Align.Center">Coming Soon!</MudText>
    </MudTabPanel>
</StrategyChooser>
<br />
<br />

<MudDialog @bind-IsVisible="_showListenAndAsk" Options="@(new DialogOptions() { FullScreen = true })">
    <DialogContent>
        <MudContainer Style="max-height:100vh; overflow-y: scroll;">
            <MudStack>
                <MudStack Row="true">
                    <MudSpacer/>
                    <MudButton Color="Color.Primary" OnClick="@(() => _showListenAndAsk = false)">Close</MudButton>
                    <MudSpacer/>
                </MudStack>
                <MudCard>
                    <MudStack>
                        <EmbeddedVideo TikTok="@(("onethree7eight", "7360745408064228638"))" />
                        <EmbeddedVideo TikTok="@(("guywhoknowstheguy", "7360805265379216682"))" />
                    </MudStack>
                </MudCard>
            </MudStack>
        </MudContainer>
    </DialogContent>
</MudDialog>

<MudDialog @bind-IsVisible="_show72HourMoneyChallengeVideo" Options="@(new DialogOptions() { FullWidth = true, NoHeader = true })">
    <DialogContent>
        <MudStack>
            <MudText Align="Align.Center">English</MudText>
            <EmbeddedVideo YouTube="@(Constants.MoneyChallenge[CurrentStrategy].English.YouTubeId)" />
            <MudText Align="Align.Center">Español</MudText>
            <EmbeddedVideo YouTube="@(Constants.MoneyChallenge[CurrentStrategy].Spanish!.YouTubeId)" />
        </MudStack>
    </DialogContent>
</MudDialog>

<MudDialog @bind-IsVisible="_showFaqVideo" Options="@(new DialogOptions() { FullWidth = true, NoHeader = true })">
    <DialogContent>
        <MudStack>
            <EmbeddedVideo YouTube="@(UI.EnglishLocale[Content.MoneyChallengeFAQ]!.Id)" />
        </MudStack>
    </DialogContent>
</MudDialog>

<MudDialog @bind-IsVisible="_show1On1Presentation" Options="@(new DialogOptions() { FullScreen = true })">
    <DialogContent>
        <MudContainer Style="max-height:100vh; overflow-y: scroll;">
            <MudStack>
                <MudStack Row="true">
                    <MudSpacer/>
                    <MudButton Color="Color.Primary" OnClick="@(() => _show1On1Presentation = false)">Close</MudButton>
                    <MudSpacer/>
                </MudStack>
                <MudStack Row="true">
                    <MudSpacer/>
                    <MudText Style="vertical-align:central;"><MudButton Color="Color.Primary" OnClick="@(() => { _72Hr1On1OverviewImageUrl = Constants.GetImageUrl(Image.Overview1On1English); _72Hr1On1RevenueSharingImageUrl = Constants.GetImageUrl(Image.RevenueShare1On1English); })">English</MudButton> | <MudButton Color="Color.Primary" OnClick="@(() => { _72Hr1On1OverviewImageUrl = Constants.GetImageUrl(Image.Overview1On1Spanish); _72Hr1On1RevenueSharingImageUrl = Constants.GetImageUrl(Image.RevenueShare1On1Spanish); })">Español</MudButton></MudText>
                    <MudSpacer/>
                </MudStack>
                <MudImage Src="@_72Hr1On1OverviewImageUrl"/>
                <MudImage Src="@_72Hr1On1RevenueSharingImageUrl"/>
                <br/>
                <MudText>&nbsp;</MudText>
            </MudStack>
        </MudContainer>
    </DialogContent>
</MudDialog>

<MudDialog @bind-IsVisible="_show72HourMoneyChallengeShareable" Options="@(new DialogOptions() { NoHeader = true })">
    <DialogContent>
        <ShareableVideoMultilingual Description="@Constants.MoneyChallenge[CurrentStrategy].Description"
                                    Duration="@Constants.MoneyChallenge[CurrentStrategy].Duration"
                                    Url="@Constants.MoneyChallenge[CurrentStrategy].PreviewUrl"
                                    
                                    EnglishTextToCopy="@(Constants.MoneyChallenge[CurrentStrategy].English.Message)"
                                    EnglishTooltip="@(Constants.MoneyChallenge[CurrentStrategy].English.Tooltip)"
                                    EnglishImageUrl="@(Constants.MoneyChallenge[CurrentStrategy].ImageUrl)"
                                    
                                    SpanishTextToCopy="@(Constants.MoneyChallenge[CurrentStrategy].Spanish!.Message)"
                                    SpanishTooltip="@(Constants.MoneyChallenge[CurrentStrategy].Spanish!.Tooltip)"
                                    SpanishImageUrl="@(Constants.MoneyChallenge[CurrentStrategy].ImageUrl)" />
    </DialogContent>
</MudDialog>

<MudDialog @bind-IsVisible="_signUpDialog.Show">
    <DialogContent>
        <TeamMemberPicker Description="Sign Up Under:" @bind-SelectedTeamMember="_selectedTeamMember" User="AppState.User">
            <ShareableVideo Description="Take the 72-Hour Money Challenge!"
                            Url="@_signUpDialog.Url(_selectedTeamMember?.MemberId)"
                            Tooltip="Shareable copied!"
                            TextToCopy="@($"Take the 72-Hour Money Challenge!{Environment.NewLine}{Constants.PointingDownEmoji}{Environment.NewLine}{_signUpDialog.Url(_selectedTeamMember?.MemberId)}")"
                            ImageUrl="@Constants.GetImageUrl(Image.MoneyChallengeLogo)" />
        </TeamMemberPicker>
    </DialogContent>
</MudDialog>

@code {
    private bool _show72HourMoneyChallengeVideo;
    private bool _showFaqVideo;
    private bool _show1On1Presentation;
    private bool _show72HourMoneyChallengeShareable;
    private string _72Hr1On1OverviewImageUrl = Constants.GetImageUrl(Image.Overview1On1English);
    private string _72Hr1On1RevenueSharingImageUrl = Constants.GetImageUrl(Image.RevenueShare1On1English);
    private bool _showListenAndAsk;
    private StrategyChooser? _strategyChooser;
    private TeamMember? _selectedTeamMember;
    private (bool Show, Func<string, string> Url) _signUpDialog;

    private Strategy CurrentStrategy => _strategyChooser!.GetSelectedStrategy();

    protected override void OnInitialized()
    {
        _selectedTeamMember = AppState?.User;
    }
}
