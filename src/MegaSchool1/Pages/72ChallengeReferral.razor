@page "/72/{MemberId}/{TikTokId}"
@using System.Text.RegularExpressions
@using MegaSchool1.Components
@using MegaSchool1.Repository.Model
@inject Repository.Repository Repo
@inject HttpClient Http

<Centered><MudImage Src="/images/72-hour-money-challenge.png" /></Centered>
<br/>
<br/>
<Centered><MudText Typo="Typo.h3" Style="color:white;">The Challenge</MudText></Centered>
<br />
<Centered>
    <MudCard>
        <EmbeddedVideo YouTube="LtNcG_jxW7E" />
    </MudCard>
</Centered>
<br/>
<br/>
<Centered><MudText Typo="Typo.h3" Style="color:white;">FAQ</MudText></Centered>
<br />
<Centered>
    <MudCard >
        <EmbeddedVideo YouTube="csDw2CVLCxA" />
    </MudCard>
</Centered>
<br />
<br />
<Centered><MudText Style="color:white;" Align="Align.Center">To take the challenge or learn more, text<br /><br />'@TikTokId' to @(Regex.Replace(_qmd?.PhoneNumber ?? "224-310-9357", @"(\d{3})(\d{3})(\d{4})", "$1-$2-$3"))</MudText></Centered>

@code {
    private QMD? _qmd;

    [Parameter]
    public string MemberId { get; set; } = default!;

    [Parameter]
    public string TikTokId { get; set; } = default!;

    protected override async Task OnInitializedAsync()
    {
        _qmd = await Repo.GetQMDInfo(this.MemberId, Http);
    }
}