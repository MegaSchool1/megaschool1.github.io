@inherits MegaSchool1.Components.ComponentBase
@using System.Text.RegularExpressions
@using MegaSchool1.Repository.Model
@inject Repository.Repository Repo
@inject HttpClient Http

@code {
    protected const string English = "en";
    protected const string Spanish = "es";

    private QMD? _qmd;

    [Parameter]
    public string MemberId { get; set; } = default!;

    [Parameter]
    public string ReferralId { get; set; } = default!;

    [Parameter]
    public string Language { get; set; } = English;

    protected string QMDPhoneNumber => Regex.Replace(_qmd?.PhoneNumber ?? "224-310-9357", @"(\d{3})(\d{3})(\d{4})", "$1-$2-$3");

    protected override async Task OnInitializedAsync()
    {
        _qmd = await Repo.GetQMDInfo(this.MemberId, Http);
    }
}